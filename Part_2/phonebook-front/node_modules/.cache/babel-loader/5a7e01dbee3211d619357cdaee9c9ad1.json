{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kptur\\\\Desktop\\\\V2P3\\\\Web- ja mobiiliohjelmointi 2022\\\\Part_2\\\\phonebook-front\\\\src\\\\App.js\";\nimport React from 'react';\nimport Persons from './components/Persons';\nimport personService from './services/persons';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseUrl = 'http://localhost:3001/persons';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addPerson = (event, id) => {\n      event.preventDefault();\n      const personObject = {\n        name: this.state.newPerson,\n        id: this.state.persons.length + 1,\n        number: this.state.newNumber\n      }; //      iterates persons     value        return       returnvalue includes\n\n      if (this.state.persons.map(personX => personX.name).includes(personObject.name)) {\n        console.log(`Contact \"${personObject.name}\" already in phonebook:`, this.state.persons.map(personObject => personObject.name).includes(personObject.name));\n        console.log('Sending alert of duplicate contact:'); //alert(`Henkilö \"${personObject.name}\" on jo puhelinluettelossa!`)\n\n        this.setState({\n          error: `Henkilö \"${personObject.name}\" on jo puhelinluettelossa!`,\n          persons: this.state.persons.filter(n => n.id !== id),\n          newPerson: '',\n          newNumber: ''\n        });\n        setTimeout(() => {\n          this.setState({\n            error: null\n          });\n        }, 5000);\n        return;\n      } // called in componentDidMount\n\n\n      personService.create(personObject).then(newPerson => {\n        this.setState({\n          persons: this.state.persons.concat(newPerson),\n          newPerson: '',\n          newNumber: ''\n        });\n      });\n      console.log('Contact added.'); //console.log('A',event.target)\n    };\n\n    this.deleteContact = (id, event) => {\n      const url = `${baseUrl}/${id}`;\n      const person = this.state.persons.find(n => n.id === id);\n      console.log(`Sending alert of deleting contact \"${person.name}\":`);\n      const permPerson = person.name;\n\n      if (!window.confirm(`Haluatko poistaa henkilön \"${person.name}\" puhelinluettelosta?`)) {\n        console.log(`The deletion of \"${person.name}\" cancelled.`);\n        return;\n      }\n\n      axios //Sends HTTP DELETE request\n      .delete(url, person).then(response => {\n        this.setState({\n          persons: this.state.persons.filter(person => person.id !== id)\n        });\n        console.log(`Contact \"${permPerson}\" deleted.`);\n      });\n    };\n\n    this.handlePersonChange = event => {\n      //console.log('B',event.target.value)\n      this.setState({\n        newPerson: event.target.value\n      });\n    };\n\n    this.handleNumberChange = event => {\n      //console.log('C',event.target.value)\n      this.setState({\n        newNumber: event.target.value\n      });\n    };\n\n    this.state = {\n      persons: [],\n      newPerson: '',\n      newNumber: '',\n      error: null\n    };\n    console.log('constructor');\n  } //-----------------------------------------------------------------------------------------------------------------\n  // Backside of the app\n  // allows to execute React node when the component is already placed in the DOM\n\n\n  componentDidMount() {\n    personService.getAll().then(persons => {\n      this.setState({\n        persons\n      });\n    });\n  } // event handler for adding persons\n\n\n  //-----------------------------------------------------------------------------------------------------------------\n  // Frontside of the app\n  render() {\n    console.log('rendering');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Notification, {\n          message: this.state.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Puhelinluettelo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.addPerson,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Nimi: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: this.state.newPerson,\n              onChange: this.handlePersonChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Numero: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: this.state.newNumber,\n              onChange: this.handleNumberChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"saveButtonDiv\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"saveButton\",\n              type: \"submit\",\n              children: \"tallenna\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Numerot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          children: /*#__PURE__*/_jsxDEV(Persons, {\n            persons: this.state.persons,\n            onDeleteContact: this.deleteContact\n          }, this.state.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }, this);\n  }\n\n} // method for sending notifications\n\n\nconst Notification = _ref => {\n  let {\n    message\n  } = _ref;\n\n  if (message === null) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Notification;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"Notification\");","map":{"version":3,"sources":["C:/Users/kptur/Desktop/V2P3/Web- ja mobiiliohjelmointi 2022/Part_2/phonebook-front/src/App.js"],"names":["React","Persons","personService","axios","baseUrl","App","Component","constructor","props","addPerson","event","id","preventDefault","personObject","name","state","newPerson","persons","length","number","newNumber","map","personX","includes","console","log","setState","error","filter","n","setTimeout","create","then","concat","deleteContact","url","person","find","permPerson","window","confirm","delete","response","handlePersonChange","target","value","handleNumberChange","componentDidMount","getAll","render","Notification","message"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Persons from './components/Persons'\r\nimport personService from './services/persons'\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = 'http://localhost:3001/persons'\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      persons: [],\r\n      newPerson: '',\r\n      newNumber: '',\r\n      error: null\r\n    }\r\n    console.log('constructor')\r\n  }\r\n\r\n//-----------------------------------------------------------------------------------------------------------------\r\n// Backside of the app\r\n\r\n  // allows to execute React node when the component is already placed in the DOM\r\n  componentDidMount() {\r\n    personService\r\n      .getAll()\r\n      .then(persons => {\r\n        this.setState({ persons })\r\n      })\r\n  }\r\n\r\n  // event handler for adding persons\r\n  addPerson = (event, id) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: this.state.newPerson,\r\n      id: this.state.persons.length + 1,\r\n      number: this.state.newNumber\r\n    }\r\n\r\n    //      iterates persons     value        return       returnvalue includes\r\n    if( this.state.persons.map(personX => personX.name).includes(personObject.name) ){\r\n      console.log( `Contact \"${personObject.name}\" already in phonebook:`, this.state.persons.map(personObject => personObject.name).includes(personObject.name) )\r\n      console.log('Sending alert of duplicate contact:')\r\n      //alert(`Henkilö \"${personObject.name}\" on jo puhelinluettelossa!`)\r\n      this.setState({\r\n        error: `Henkilö \"${personObject.name}\" on jo puhelinluettelossa!`,\r\n        persons: this.state.persons.filter(n => n.id !== id),\r\n        newPerson: '',\r\n        newNumber: ''\r\n      })\r\n      setTimeout(() => {\r\n        this.setState({error: null})\r\n      }, 5000)\r\n      return\r\n    }\r\n\r\n    // called in componentDidMount\r\n    personService\r\n      .create(personObject)\r\n      .then(newPerson => {\r\n        this.setState({\r\n          persons: this.state.persons.concat(newPerson),\r\n          newPerson: '',\r\n          newNumber: ''\r\n        })\r\n      })\r\n    console.log('Contact added.')\r\n    //console.log('A',event.target)\r\n  }\r\n\r\n  // function for deleting contacts\r\n  deleteContact = (id, event) => {\r\n    const url = `${baseUrl}/${id}`\r\n    const person = this.state.persons.find(n => n.id === id)\r\n    console.log(`Sending alert of deleting contact \"${person.name}\":`)\r\n    const permPerson = person.name\r\n    if (!window.confirm(`Haluatko poistaa henkilön \"${person.name}\" puhelinluettelosta?`)) {\r\n      console.log(`The deletion of \"${person.name}\" cancelled.`)\r\n      return\r\n    }\r\n    axios //Sends HTTP DELETE request\r\n      .delete(url, person)\r\n      .then(response => {\r\n        this.setState({\r\n          persons: this.state.persons.filter(person => person.id !== id)\r\n        })\r\n        console.log(`Contact \"${permPerson}\" deleted.`)\r\n      })\r\n  }\r\n  \r\n  handlePersonChange = (event) => {\r\n    //console.log('B',event.target.value)\r\n    this.setState({ newPerson: event.target.value })\r\n  }\r\n\r\n  handleNumberChange = (event) => {\r\n    //console.log('C',event.target.value)\r\n    this.setState({ newNumber: event.target.value })\r\n  }\r\n\r\n//-----------------------------------------------------------------------------------------------------------------\r\n// Frontside of the app\r\n  render() {\r\n    console.log('rendering')\r\n\r\n    return (\r\n    <div>\r\n      <div>\r\n        <Notification message={this.state.error}/>\r\n        <h1>Puhelinluettelo</h1>\r\n        <form onSubmit={this.addPerson}>\r\n          \r\n          <div>\r\n          Nimi: <br></br>  \r\n          <input\r\n            value={this.state.newPerson}\r\n            onChange={this.handlePersonChange}\r\n          />\r\n          </div>\r\n\r\n          <div>\r\n            Numero: <br></br>\r\n            <input\r\n              value={this.state.newNumber}\r\n              onChange={this.handleNumberChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"saveButtonDiv\">\r\n            <button className=\"saveButton\" type=\"submit\">tallenna</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div>\r\n        <h2>Numerot</h2>\r\n        <table>\r\n          <Persons\r\n            key={this.state.id}\r\n            persons={this.state.persons}\r\n            onDeleteContact={this.deleteContact}\r\n          />\r\n        </table>\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\n// method for sending notifications\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}